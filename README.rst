===========
pelican-ghp
===========

This is the source for my `personal website`_, generated with Pelican_.

Setup
=====

Clone the repository::

    $ git clone git@github.com:ixjlyons/pelican-ghp.git
    $ cd pelican-ghp

Now create a virtual environment and install the dependencies, which are:

* Pelican_
* ghp-import_

These are included in ``requirements.txt``, the following should work::

    $ python -m venv .venv
    $ source .venv/bin/activate
    (.venv) $ pip install -r requirements.txt

Build
=====

The Makefile generated by pelican-quickstart_ is included here, with some
modifications. It provides a ``devserver`` target which sets up processes for
automatically regenerating the site when files in ``content/`` change and
serving the ``output/`` directory on localhost.

I prefer the more manual approach with no "background" processes that I would
probably forget about. Generate the site manually::

    (.venv) $ make html

Then set up a terminal to serve the site locally::

    (.venv) $ make serve

Point the browser of choice to ``locahost:8000`` to see the result (note: the
port can be changed -- see the ``Makefile``). Now, when changing content, issue
another ``make html`` and reload the site in the browser.

We'll Do it Live!
=================

This site is set up as a personal site for my GitHub profile, so there is
a separate repository holding the contents of the website (as opposed to
a project page, where the content exists only in a ``gh-pages`` branch). This
is done by pushing the ``gh-pages`` branch to that separate repository.

To deploy the site to GitHub Pages::

    (.venv) $ make github

You can optionally specify a commit message (note: this is not the commit
message that shows up on the ``master`` branch of this repository -- those
commits are separate)::

    (.venv) $ make github MSG="\"Commit message for GHP\""


.. _personal website: https://ixjlyons.github.io
.. _Pelican: http://blog.getpelican.com/
.. _pelican-plugins: https://github.com/getpelican/pelican-plugins
.. _ghp-import: https://github.com/davisp/ghp-import
.. _pelican-quickstart: http://docs.getpelican.com/en/3.6.3/quickstart.html#create-a-project
