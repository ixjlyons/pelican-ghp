# pelican-ghp

This is the source for my [Github Pages static site](ixjlyons.github.io)
generated with [Pelican][pelican].

## Dependencies

* [pelican][pelican]
* [markdown][markdown]
* [ghp-import][ghp-import]

## Workflow

### Plugins

I have [pelican-plugins][pelican-plugins] set up as a submodule. It is fairly
simple to handle updates, as it is a repo I only pull from.

After initially cloning this repository, just do:

```
git submodule init
git submodule update
```

To update the plugins:

```
git submodule update --remote
```

It is probably not necessary to update the plugins with every commit, but it
is likely a good idea to keep it reasonably up to date.

### Testing Locally

The Makefile generated by `pelican-quickstart` is included here, with some
modifications. It provides a `devserver` target which sets up processes for
automatically regenerating the site when files in `content/` change and serving
the `output/` directory on localhost.

I prefer the more manual approach with no "background" processes that I would
probably forget about. Generate the site manually:

```
make html
```

Then set up a terminal to serve the site locally:

```
make serve
```

Point the browser of choice to `locahost:8000` to see the result. Now, when
changing content, issue another `make html`  and reload the the site in the
browser.

### Pushing to GitHub Pages

I'm currently using [ghp-import][ghp-import] to manage this. I previously had
the `output/` folder as a submodule of this repository which pointed to my
GitHub Pages repo, but managing this turned out to be unnecessarily
non-straightforward. Now, publishing the site is as simple as:

```
make github MSG="Commit message for GHP"
```

This essentially creates a local `gh-pages` branch in this repository then
pushes it to `master` of my GHP remote repository. See the variables at the top
of the Makefile.


[pelican]: http://blog.getpelican.com/
[markdown]: https://pythonhosted.org/Markdown/
[pelican-plugins]: https://github.com/getpelican/pelican-plugins
[ghp-import]: https://github.com/davisp/ghp-import
